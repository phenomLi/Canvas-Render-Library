var P2=function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=7)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a=s(1),n=s(3),h=s(6),r=s(9);class o{constructor(t,e){this._id=Symbol(),this._type=e,this._show=!0,this.isMount=!1,this.count=1}initSetter(){r.default[this._type].writableProperties.map(t=>{let e=t.substring(0,1).toUpperCase()+t.substring(1);void 0===this[`set${e}`]&&(this[`set${e}`]=function(e){this[`_${t}`]=e,r.default[this._type].notRePathProperties.includes(t)||this.drawPath().rotatePath().transFormPath()})})}attr(t,e){if(r.default[this._type].readableProperties.includes(t))return void 0!==e?(r.default[this._type].writableProperties.includes(t)?(this[`set${t.substring(0,1).toUpperCase()+t.substring(1)}`](e),this.isMount&&n.default.notify("update")):console.warn(`${t}不能被修改`),this):this[`_${t}`];console.warn(`${t}属性不存在`)}toggleMount(t){this.isMount=t,t?this.mounted():this.removed(),"Group"!==this._type&&"Composite"!==this._type||this.getShapeList().map(e=>{e.toggleMount(t)})}getCount(){return this.count}getShapeList(){return null}config(){}mounted(){this._mounted&&"function"==typeof this._mounted&&this._mounted()}removed(){this._removed&&"function"==typeof this._removed&&this._removed()}drawPath(){return this}rotatePath(){return this}transFormPath(){return this}render(t){}}e.Base=o;e.shapeConfig=class{};e.Shape=class extends o{constructor(t,e){super(t,e),this._x=t.pin[0],this._y=t.pin[1],this._color=t.color,this._fill=void 0===t.fill||t.fill,this._opacity=t.opacity||1,this._rotate=t.rotate||0,this._transform=t.transform||[],this._mounted=t.mounted||(()=>{}),this._removed=t.removed||(()=>{}),this._fillRule=!0,this.mouseIn=!1,this.eventList=[],this.camelCaseEventName={};for(let e in t)/^on./g.test(e)&&(this.camelCaseEventName[e]=t[e],this.bind(e.toLowerCase().substring(2),t[e]))}getBaseConfig(){return Object.assign({pin:[this._x,this._y],center:this._center,color:this._color,fill:this._fill,rotate:this._rotate,transform:this._transform},this.camelCaseEventName,{mounted:this._mounted,removed:this._removed})}isMouseIn(t){if(void 0===t)return this.mouseIn;this.mouseIn=t}getPath(){return this.path}setPath(t){this.path=t}setX(t){let e=t-this._x;this._x=t,this._center[0]=this._center[0]+e,this.drawPath().rotatePath().transFormPath()}setY(t){let e=t-this._y;this._y=t,this._center[1]=this._center[1]+e,this.drawPath().rotatePath().transFormPath()}addEvent(t){t.map(t=>{t.fn instanceof Array?t.fn.map(e=>{n.default.notify("add_event",{shape:this,eventName:t.eventName,fn:e})}):n.default.notify("add_event",{shape:this,eventName:t.eventName,fn:t.fn})})}delEvent(t){t.map(t=>{"keypress"===t.eventName?n.default.notify("del_event",{shape:this,eventName:t.eventName,keyCode:t.keyCode}):n.default.notify("del_event",{shape:this,eventName:t.eventName})})}bind(t,e){"keypress"===t?e instanceof Array?e.map(t=>t.fn=t.fn.bind(this)):e.fn=e.fn.bind(this):e=e.bind(this),this.isMount&&this.addEvent([{eventName:t,fn:e}]),this.eventList.push({eventName:t,fn:e})}unbind(t,e){"keypress"===t?this.delEvent([{eventName:t,keyCode:e}]):this.delEvent([{eventName:t}])}getEventList(){return this.eventList}animateTo(t,e){let s=[],i=this;for(let e in t.target)r.default[i._type].animateProperties.includes(e)&&s.push([i["_"+e],t.target[e]]);let a=new h.default({value:s,duration:t.duration,delay:t.delay,timingFunction:t.timingFunction,render:function(){let e=0;for(let s in t.target)r.default[i._type].animateProperties.includes(s)&&i.attr(s,arguments[e++])}}).final(e);t.loop?a.loop():a.start()}mounted(){this.addEvent(this.eventList),this._mounted&&"function"==typeof this._mounted&&this._mounted()}removed(){this.delEvent(this.eventList),this._removed&&"function"==typeof this._removed&&this._removed()}drawPath(){return this}rotatePath(){if("circle"===this._type||"ellipse"===this._type)return this;let t=new Path2D;return t.addPath(this.path,i.rotate(a.Matrix.rotateMatrix,this._center,this._rotate)),this.path=t,this}transFormPath(){let t=new Path2D;return t.addPath(this.path,i.transform(a.Matrix.transformMatrix,this._center,this._transform)),this.path=t,this}render(t){this._show&&(t.globalAlpha=this._opacity,this._fill?(t.fillStyle=this._color,t.fill(this.path,this._fillRule?"nonzero":"evenodd")):(t.strokeStyle=this._color,t.stroke(this.path)))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a=s(3),n=s(10),h=s(11),r=s(12),o=s(13),u=s(14),d=s(15),p=s(16),c=s(17),l=s(5),f=s(18);e.Matrix={rotateMatrix:document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),transformMatrix:document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),translateMatrix:document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()};e.shapeHeap=class{constructor(t,e){this.shapeHeapArray=new Array,this.count=0,this.ctx=t,this.canvasInfo=e,this.aSyncUpdateRequestCount=0,this.updateRequestCount=0}getCount(){return this.count}append(t){this.shapeHeapArray.push(t),t.toggleMount(!0),this.count+=t.getCount(),a.default.notify("update")}remove(t){let e=t.attr("id");this.shapeHeapArray.map((t,s)=>{t.attr("id")===e&&this.shapeHeapArray.splice(s,1)}),t.toggleMount(!1),this.count-=t.getCount(),a.default.notify("update")}clone(t){if("Group"===t.attr("type")){let s=new e.shapes.Group(t.config());return i.DFS(t.getShapeList(),t=>{s.append(this.clone(t))}),s}if("Composite"===t.attr("type")){let s=new e.shapes.Composite(t.config());return i.DFS(t.getShapeList(),t=>{s.join(this.clone(t))}),s}return new(e.shapes[t.attr("type")])(t.config())}clear(){this.shapeHeapArray.map(t=>{t.toggleMount(!1)}),this.shapeHeapArray=[],this.count=0,this.ctx.clearRect(0,0,this.canvasInfo.width,this.canvasInfo.height)}update(){this.updateRequestCount++,setTimeout(function(){this.aSyncUpdateRequestCount++,this.aSyncUpdateRequestCount===this.updateRequestCount&&(this.updateRequestCount=this.aSyncUpdateRequestCount=0,this.reRender())}.bind(this),0)}reRender(){this.ctx.clearRect(0,0,this.canvasInfo.width,this.canvasInfo.height),this.shapeHeapArray.map(t=>{this.ctx.save(),t.render(this.ctx),this.ctx.restore()})}},e.shapes={Custom:n.Custom,Circle:r.Circle,Rectangle:o.Rectangle,Triangle:h.Triangle,Group:c.Group,Composite:l.Composite,Ellipse:u.Ellipse,RoundRect:d.RoundRect,SVGPath:p.SVGPath,Text:f.TextBlock},e.utils={isInShape:i.isInShape,isInPath:i.isInPath}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(5);function a(t,e,s=!0){t.map(t=>{"Group"===t.attr("type")||"Composite"===t.attr("type")?(s&&e(t),a(t.getShapeList(),e)):e(t)})}e.DFS=a,e.calcCenter=function(t){return[]},e.rotate=function(t,e,s){let i=s/180*Math.PI;return t.a=Math.cos(i),t.c=-1*Math.sin(i),t.b=Math.sin(i),t.d=Math.cos(i),t.e=-e[0]*Math.cos(i)+e[1]*Math.sin(i)+e[0],t.f=-e[0]*Math.sin(i)-e[1]*Math.cos(i)+e[1],t},e.transform=function(t,e,s){return 0===s.length?null:(t.a=s[0][0],t.c=s[0][1],t.b=s[1][0],t.d=s[1][1],t.e=-e[0]*s[0][0]-e[1]*s[0][1]+e[0],t.f=-e[0]*s[1][0]-e[1]*s[1][1]+e[1],t)},e.matrixMulti=function(t,e,s){return null===t&&null===e?null:null===t&&null!==e?e:null!==t&&null===e?t:(s.a=t.a*e.a+t.c*e.b,s.b=t.b*e.a+t.d*e.b,s.c=t.a*e.c+t.c*e.d,s.d=t.b*e.c+t.d*e.d,s.e=t.a*e.e+t.c*e.f+t.e,s.f=t.b*e.e+t.d*e.f+t.f,s)},e.isInShape=function(t,e,s,n){if(e instanceof i.Composite){let i=!1;return a(e.getShapeList(),e=>{t.isPointInPath(e.getPath(),s,n)&&(i=!0)},!1),i}return t.isPointInPath(e.getPath(),s,n)},e.isInPath=function(t,e,s,n){if(e instanceof i.Composite){let i=!1;return a(e.getShapeList(),e=>{t.isPointInStroke(e.getPath(),s,n)&&(i=!0)},!1),i}return t.isPointInStroke(e.getPath(),s,n)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={listenerTable:{},addListener(t,e){this.listenerTable[t]=e},notify(t,e){return this.listenerTable[t](e)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(1);e.line=new class{constructor(){}init(t,e){return this.path=t,this.oX=e[0],this.oY=e[1],this.endX=this.oX,this.endY=this.oY,this.tPath=new Path2D,i.Matrix.translateMatrix.e=this.oX,i.Matrix.translateMatrix.f=this.oY,this.tPath.moveTo(0,0),this}bee(t){for(let e=0;e<t.length;e++)this.tPath.lineTo(t[e][0],t[e][1]);return this.endX=t[t.length-1][0],this.endY=t[t.length-1][1],this}bez(t,e,s){this.tPath.moveTo(this.endX,this.endY),this.tPath.bezierCurveTo(t[0],t[1],e[0],e[1],s[0],s[1]),this.endX=s[0],this.endY=s[1]}arc(t,e,s,i=!0){let a,n;return a=this.endX-t*Math.cos((360-e)/180*Math.PI),n=this.endY+t*Math.sin((360-e)/180*Math.PI),this.tPath.arc(a,n,t,e/180*Math.PI,s/180*Math.PI,i),this.endX=a-t*Math.cos((360-s)/180*Math.PI),this.endY=n+t*Math.sin((360-s)/180*Math.PI),this}move(t,e){this.tPath.moveTo(t,e),this.endX=t,this.endY=e}end(){this.path.addPath(this.tPath,i.Matrix.translateMatrix),i.Matrix.translateMatrix.e=i.Matrix.translateMatrix.f=0}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(3),n=s(2),h=s(1);e.Composite=class extends i.Shape{constructor(t){super(t,"Composite"),this.deep=void 0===t.deep||t.deep,this._center=t.center,this.shapeList=[],t&&t.shapes&&t.shapes.map(t=>{this.join(t,this.deep)}),this.initSetter()}join(t,e){if(t instanceof Array)t.map(t=>this.join(t,e));else{if("Group"===t.attr("type"))return void console.warn("group类型不能加入composite");this.shapeList.push(this.shapeProcessor(e?a.default.notify("clone",t):t)),this.isMount&&a.default.notify("update")}}config(){return Object.assign({},this.getBaseConfig(),{deep:this.deep,shapes:this.shapeList})}setX(t){let e=t-this._x;this._x=t,this._center[0]=this._center[0]+e,this.shapeList.map(t=>{t.attr("x",t.attr("x")+e),this.shapeProcessor(t)})}setY(t){let e=t-this._y;this._y=t,this._center[1]=this._center[1]+e,this.shapeList.map(t=>{t.attr("y",t.attr("y")+e),this.shapeProcessor(t)})}setShow(t){this._show=t,this.shapeList.map(e=>{e.attr("show",t)})}setRotate(t){this._rotate=t,n.DFS(this.getShapeList(),t=>{t.drawPath().rotatePath().transFormPath()},!1),this.shapeList.map(t=>{this.rotatePath(t)})}setTransform(t){return n.DFS(this.getShapeList(),t=>{t.drawPath().rotatePath().transFormPath()},!1),this.shapeList.map(t=>{this.transFormPath(t)}),this}getShapeList(){return this.shapeList}shapeProcessor(t){return this._rotate&&this.rotatePath(t),this._transform&&this.transFormPath(t),t}rotatePath(t){if("Composite"===t.attr("type"))n.DFS(t.getShapeList(),t=>{let e=new Path2D;e.addPath(t.getPath(),n.rotate(h.Matrix.rotateMatrix,this._center,this._rotate)),t.setPath(e)},!1);else if("Text"===t.attr("type"))t.setCompositeRotate(this._center,this._rotate);else{let e=new Path2D;e.addPath(t.getPath(),n.rotate(h.Matrix.rotateMatrix,this._center,this._rotate)),t.setPath(e)}return this}transFormPath(t){if("Composite"===t.attr("type"))n.DFS(t.getShapeList(),t=>{let e=new Path2D;e.addPath(t.getPath(),n.transform(h.Matrix.transformMatrix,this._center,this._transform)),t.setPath(e)},!1);else{if("Text"===t.attr("type"))return this;{let e=new Path2D;e.addPath(t.getPath(),n.transform(h.Matrix.transformMatrix,this._center,this._transform)),t.setPath(e)}}return this}render(t){n.DFS(this.shapeList,e=>{t.save(),e.render(t),t.restore()},!1)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(8);var a;!function(t){t[t.init=0]="init",t[t.play=1]="play",t[t.stop=2]="stop",t[t.end=3]="end",t[t.final=4]="final"}(a||(a={}));e.default=class{constructor(t){this.isLoop=!1,this.animationQueue=[],this.animationQueueIndex=0,this.animationQueue.push(t),this.init(t)}init(t){return this._value=[],this._duration=t.duration||1e3,this._delay=t.delay||0,this._timingFunction=t.timingFunction?i.default[t.timingFunction]:i.default.linear,this._renderFunction=t.render||((...t)=>{}),this._onStart=t.onStart||(()=>{}),this._onEnd=t.onEnd||(()=>{}),this._onStop=t.onStop||(()=>{}),this.state=a.init,this.initValue(t.value),this}initValue(t){t.every(t=>t instanceof Array)?t.map(t=>{this._value.push({start:t[0],end:t[1]})}):this._value.push({start:t[0],end:t[1]})}animationFrame(){let t=Date.now()-this.beginTime;t>=this._duration||this.state===a.end?(this.renderFunction(this._duration,this._duration),this.end()):this.state===a.stop?this.renderFunction(t,this._duration):this.state===a.init?this.renderFunction(0,this._duration):(this.renderFunction(t,this._duration),window.requestAnimationFrame(this.animationFrame.bind(this)))}renderFunction(t,e){const s=this._value.map(s=>this._timingFunction(t,s.start,s.end-s.start,e));this._renderFunction.apply(this,s)}finalFunction(){this.isLoop?(this.state=a.init,this.animationQueueIndex=0,this.init(this.animationQueue[this.animationQueueIndex]).start()):this._onFinal&&this._onFinal()}start(){this.animationQueueIndex++,setTimeout(()=>{this.state=a.play,this.beginTime=Date.now(),this._onStart(),window.requestAnimationFrame(this.animationFrame.bind(this))},this._delay)}loop(){this.isLoop=!0,this.start()}stop(){this.state===a.play&&(this.state=a.stop,this._onStop())}end(){this.state===a.play&&(this.state=a.end,this._onEnd(),this.animationQueueIndex<this.animationQueue.length?this.init(this.animationQueue[this.animationQueueIndex]).start():(this.state=a.final,this.finalFunction()))}final(t){return this._onFinal=t,this}next(t){return this.animationQueue.push(t),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(1),a=s(1),n=s(3),h=s(19),r=s(6);e.default=function(t,e){class s{constructor(t,e){this.ele=null,this.config={width:400,height:400,backgroundColor:"#eee"},this.ele=t,this.config=e||this.config,this.setWidth().setHeight().setBackgroundColor()}setWidth(){let t="fullWidth"===this.config.width?e.body.clientWidth:this.config.width;return this.ele.setAttribute("width",t.toString()),this.width=parseInt(t.toString()),this}setHeight(){let t="fullHeight"===this.config.height?e.body.clientHeight:this.config.height;return this.ele.setAttribute("height",t.toString()),this.height=parseInt(t.toString()),this}setBackgroundColor(){return this.ele.style.backgroundColor=this.config.backgroundColor,this}}return class{constructor(t,e){this.canvasEle=t,this.ctx=t.getContext("2d"),this.canvasStyle=new s(this.canvasEle,e),this.shapeHeap=new a.shapeHeap(this.ctx,{width:this.getWidth(),height:this.getHeight()}),this.eventSystem=new h.EventSystem(this.canvasEle,this.ctx),n.default.addListener("update",this.shapeHeap.update.bind(this.shapeHeap)),n.default.addListener("clone",this.shapeHeap.clone.bind(this.shapeHeap)),n.default.addListener("add_event",this.eventSystem.addEvent.bind(this.eventSystem)),n.default.addListener("del_event",this.eventSystem.delEvent.bind(this.eventSystem)),this.shapes=i.shapes,this.utils=i.utils,this.animation=r.default}getHeight(){return this.canvasStyle.height}getWidth(){return this.canvasStyle.width}getShapesCount(){return this.shapeHeap.getCount()}append(t){t instanceof Array?t.map(t=>this.shapeHeap.append(t)):this.shapeHeap.append(t)}remove(t){this.shapeHeap.remove(t)}clear(){this.shapeHeap.clear()}clone(t){return this.shapeHeap.clone(t)}}}(window,document)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={linear:(t,e,s,i)=>s*t/i+e,easeIn:(t,e,s,i)=>s*(t/=i)*t+e,easeOut:(t,e,s,i)=>-s*(t/=i)*(t-2)+e,easeInOut:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e,easeInCubic:(t,e,s,i)=>s*(t/=i)*t*t+e,easeOutCubic:(t,e,s,i)=>s*((t=t/i-1)*t*t+1)+e,easeInOutCubic:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e,easeInQuart:(t,e,s,i)=>s*(t/=i)*t*t*t+e,easeOutQuart:(t,e,s,i)=>-s*((t=t/i-1)*t*t*t-1)+e,easeInOutQuart:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e,easeInQuint:(t,e,s,i)=>s*(t/=i)*t*t*t*t+e,easeOutQuint:(t,e,s,i)=>s*((t=t/i-1)*t*t*t*t+1)+e,easeInOutQuint:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e,easeInSine:(t,e,s,i)=>-s*Math.cos(t/i*(Math.PI/2))+s+e,easeOutSine:(t,e,s,i)=>s*Math.sin(t/i*(Math.PI/2))+e,easeInOutSine:(t,e,s,i)=>-s/2*(Math.cos(Math.PI*t/i)-1)+e,easeInExpo:(t,e,s,i)=>0==t?e:s*Math.pow(2,10*(t/i-1))+e,easeOutExpo:(t,e,s,i)=>t==i?e+s:s*(1-Math.pow(2,-10*t/i))+e,easeInOutExpo:(t,e,s,i)=>0==t?e:t==i?e+s:(t/=i/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(2-Math.pow(2,-10*--t))+e,easeInCirc:(t,e,s,i)=>-s*(Math.sqrt(1-(t/=i)*t)-1)+e,easeOutCirc:(t,e,s,i)=>s*Math.sqrt(1-(t=t/i-1)*t)+e,easeInOutCirc:(t,e,s,i)=>(t/=i/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e,easeInElastic(t,e,s,i,a,n){let h;return 0==t?e:1==(t/=i)?e+s:(void 0===n&&(n=.3*i),!a||a<Math.abs(s)?(h=n/4,a=s):h=n/(2*Math.PI)*Math.asin(s/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*i-h)*(2*Math.PI)/n)+e)},easeOutElastic(t,e,s,i,a,n){let h;return 0==t?e:1==(t/=i)?e+s:(void 0===n&&(n=.3*i),!a||a<Math.abs(s)?(a=s,h=n/4):h=n/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*t)*Math.sin((t*i-h)*(2*Math.PI)/n)+s+e)},easeInOutElastic(t,e,s,i,a,n){let h;return 0==t?e:2==(t/=i/2)?e+s:(void 0===n&&(n=i*(.3*1.5)),!a||a<Math.abs(s)?(a=s,h=n/4):h=n/(2*Math.PI)*Math.asin(s/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*i-h)*(2*Math.PI)/n)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*i-h)*(2*Math.PI)/n)*.5+s+e)},easeInBack:(t,e,s,i,a)=>(void 0===a&&(a=1.70158),s*(t/=i)*t*((a+1)*t-a)+e),easeOutBack:(t,e,s,i,a)=>(void 0===a&&(a=1.70158),s*((t=t/i-1)*t*((a+1)*t+a)+1)+e),easeInOutBack:(t,e,s,i,a)=>(void 0===a&&(a=1.70158),(t/=i/2)<1?s/2*(t*t*((1+(a*=1.525))*t-a))+e:s/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+e),easeInBounce:(t,e,s,a)=>s-i.easeOutBounce(a-t,0,s,a)+e,easeOutBounce:(t,e,s,i)=>(t/=i)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e,easeInOutBounce:(t,e,s,a)=>t<a/2?.5*i.easeInBounce(2*t,0,s,a)+e:.5*i.easeOutBounce(2*t-a,0,s,a)+.5*s+e};e.default=i},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={baseProp:{writableProperties:[],readonlyProperties:[],animateProperties:[],notRePathProperties:[],readableProperties:[]},init(){return this.baseProp.writableProperties=["x","y","color","fill","opacity","rotate","transform","show"],this.baseProp.readonlyProperties=["id","type","center"],this.baseProp.animateProperties=["x","y","color","opacity","rotate"],this.baseProp.notRePathProperties=["color","fill","opacity","show"],this.baseProp.readableProperties=[],this},handle(t,e,s){switch(t){case"add":this.add(e,s);break;case"remove":this.remove(e,s);break;case"replace":this.baseProp[e]=s}},writableProperties(t,e){return this.handle(t,"writableProperties",e),this},readonlyProperties(t,e){return this.handle(t,"readonlyProperties",e),this},animateProperties(t,e){return this.handle(t,"animateProperties",e),this},notRePathProperties(t,e){return this.handle(t,"notRePathProperties",e),this},add(t,e){return Array.isArray(e)?e.map(e=>this.baseProp[t].push(e)):this.baseProp[t].push(e),this},remove(t,e){return Array.isArray(e)?e.map(e=>{this.baseProp[t].splice(this.baseProp[t].findIndex(t=>t===e),1)}):this.baseProp[t].splice(this.baseProp[t].findIndex(t=>t===e),1),this},merge:(t,e)=>t.concat(e),get(){return Object.assign({},this.baseProp,{readableProperties:this.merge(this.baseProp.readonlyProperties,this.baseProp.writableProperties)})}};e.default={Circle:(()=>(i.init(),i.writableProperties("add","radius"),i.animateProperties("add","radius"),i.get()))(),Ellipse:(()=>(i.init(),i.writableProperties("add",["radiusX","radiusY"]),i.writableProperties("remove","transform"),i.animateProperties("add",["radiusX","radiusY"]),i.get()))(),Rectangle:(()=>(i.init(),i.writableProperties("add",["width","height"]),i.animateProperties("add",["width","height"]),i.get()))(),RoundRect:(()=>(i.init(),i.writableProperties("add",["round","height","width"]),i.animateProperties("add",["round","height","width"]),i.get()))(),Triangle:(()=>(i.init(),i.writableProperties("add","edge"),i.animateProperties("add","edge"),i.get()))(),Custom:i.init().get(),SVGPath:i.init().writableProperties("add","svgPath").get(),Text:(()=>(i.init(),i.writableProperties("remove","transform"),i.writableProperties("add",["align","dir","content","fontSize"]),i.animateProperties("add","fontSize"),i.notRePathProperties("replace",i.merge(i.baseProp.writableProperties,i.baseProp.readonlyProperties)),i.get()))(),Composite:(()=>(i.init(),i.writableProperties("remove",["color","fill","opacity"]),i.animateProperties("remove",["color","opacity"]),i.notRePathProperties("remove",["color","fill","opacity"]),i.get()))(),Group:(()=>(i.init(),i.readonlyProperties("remove","center"),i.writableProperties("replace",["show"]),i.animateProperties("replace",[]),i.notRePathProperties("replace",["show"]),i.get()))()}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(4);e.Custom=class extends i.Shape{constructor(t){super(t,"Custom"),this._center=t.center,this._fillRule=t.fillRule||!0,this._draw=t.draw,this.initSetter(),this.drawPath().rotatePath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{draw:this._draw})}drawPath(){return this.path=new Path2D,this._draw(this.path,a.line.init(this.path,[this._x,this._y])),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(4);e.Triangle=class extends i.Shape{constructor(t){super(t,"Triangle"),this._edge=t.edge,this.midEdge=this._edge/2,this.height=Math.sqrt(this._edge*this._edge-this.midEdge*this.midEdge),this._center=[this._x,this._y+this.height/2],this.initSetter(),this.drawPath().rotatePath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{edge:this._edge})}drawPath(){return this.path=new Path2D,a.line.init(this.path,[this._x,this._y]).bee([[-this.midEdge,this.height],[this.midEdge,this.height],[0,0]]).end(),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.Circle=class extends i.Shape{constructor(t){super(t,"Circle"),this._center=[this._x,this._y],this._radius=t.radius,this.initSetter(),this.drawPath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{radius:this._radius})}drawPath(){return this.path=new Path2D,this.path.arc(this._x,this._y,this._radius,0,2*Math.PI,!0),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(4);e.Rectangle=class extends i.Shape{constructor(t){super(t,"Rectangle"),this._width=t.edge[0],this._height=t.edge[1],this._center=[this._x+this._width/2,this._y+this._height/2],this.initSetter(),this.drawPath().rotatePath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{edge:[this._width,this._height]})}drawPath(){return this.path=new Path2D,a.line.init(this.path,[this._x,this._y]).bee([[this._width,0],[this._width,this._height],[0,this._height],[0,0]]).end(),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.Ellipse=class extends i.Shape{constructor(t){super(t,"Ellipse"),this._center=[this._x,this._y],this._radiusX=t.radius[0],this._radiusY=t.radius[1],this.initSetter(),this.drawPath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{radius:[this._radiusX,this._radiusY]})}setRadiusX(t){this._radiusX=t,this.drawPath().transFormPath()}setRadiusY(t){this._radiusY=t,this.drawPath().transFormPath()}setRotate(t){this._rotate=t,this.drawPath().transFormPath()}drawPath(){return this.path=new Path2D,this.path.ellipse(this._x,this._y,this._radiusX,this._radiusY,this._rotate/180*Math.PI,0,2*Math.PI,!0),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(4);e.RoundRect=class extends i.Shape{constructor(t){super(t,"RoundRect"),this._width=t.edge[0],this._height=t.edge[1],this._round=t.round,this._center=[this._x+this._width/2,this._y+this._height/2+this._round],this.initSetter(),this.drawPath().rotatePath().transFormPath()}config(){return Object.assign({},this.getBaseConfig(),{edge:[this._width,this._height],round:this._round})}drawPath(){return this.path=new Path2D,a.line.init(this.path,[this._x,this._y+this._round]).bee([[0,this._height-this._round]]).arc(this._round,180,90).bee([[this._width-this._round,this._height]]).arc(this._round,90,0).bee([[this._width,this._round]]).arc(this._round,0,-90).bee([[this._round,0]]).arc(this._round,-90,-180).end(),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.SVGPath=class extends i.Shape{constructor(t){super(t,"SVGPath")}config(){return Object.assign({},this.getBaseConfig(),{svgPath:this._svgPath})}renderPath(){return this.path=new Path2D(this._svgPath),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(3),a=s(2),n=s(0);e.Group=class extends n.Base{constructor(t){super(t,"Group"),this._mounted=void 0!==t?t.mounted:()=>{},this._removed=void 0!==t?t.removed:()=>{},this.count=0,this.shapeList=[],t&&t.shapes&&t.shapes.map(t=>{this.append(t)}),this.initSetter()}config(){return{shapes:this.shapeList,mounted:this._mounted,removed:this._removed}}setShow(t){this._show=t,this.shapeList.map(e=>{e.attr("show",t)})}getShapeList(){return this.shapeList}isShapeAt(t){return this.shapeList.some(e=>e.attr("id")===t.attr("id"))}append(t){t instanceof Array?t.map(t=>this.append(t)):(this.shapeList.push(t),this.count+=t.getCount(),this.isMount&&i.default.notify("update"))}remove(t){let e=t.attr("id");this.shapeList.map((t,s)=>{t.attr("id")===e&&this.shapeList.splice(s,1)}),this.count-=t.getCount(),this.isMount&&i.default.notify("update")}render(t){a.DFS(this.shapeList,e=>{t.save(),e.render(t),t.restore()},!1)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.TextBlock=class extends i.Shape{constructor(t){super(t,"Text"),this._maxWidth=t.maxWidth||null,this._fontSize=t.fontSize||10,this._content=t.content||"",this._align=t.align||"start",this._direction=t.dir||"inherit",this.font="px sans-serif",this._center=[],this.compositeCenter=[],this.compositeRotate=0,this.initSetter()}config(){return Object.assign({},this.getBaseConfig(),{content:this._content,fontSize:this._fontSize,align:this._align,dir:this._direction,maxWidth:this._maxWidth})}setCompositeRotate(t,e){this.compositeCenter=t,this.compositeRotate=e}textRotate(t,e,s){t.translate(e[0],e[1]),t.rotate(s/180*Math.PI),t.translate(-e[0],-e[1])}drawPath(){return this}rotatePath(){return this}transFormPath(){return this}render(t){this._show&&(this.compositeCenter.length&&this.textRotate(t,this.compositeCenter,this.compositeRotate),this.textRotate(t,[this._x+t.measureText(this._content).width,this._y-this._fontSize/2],this._rotate),t.font=this._fontSize+this.font,t.direction=this._direction,t.textAlign=this._align,t.globalAlpha=this._opacity,this._fill?(t.fillStyle=this._color,this._maxWidth?t.fillText(this._content,this._x,this._y,this._maxWidth):t.fillText(this._content,this._x,this._y)):(t.strokeStyle=this._color,this._maxWidth?t.strokeText(this._content,this._x,this._y,this._maxWidth):t.strokeText(this._content,this._x,this._y)))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2);e.eventInfo=class{};e.keyBoardEvent=class{};e.event=class{};e.EventSystem=class{constructor(t,e){this.eventList=["click","mousemove","keypress","mouseover","mouseout"],this.canvasEle=t,this.canvasLeft=t.getBoundingClientRect().left,this.canvasTop=this.canvasEle.getBoundingClientRect().top,this.ctx=e,this.clickEventList=[],this.mouseoverEventList=[],this.mouseoutEventList=[],this.mousemoveEventList=[],this.keypressEventMap={},this.init()}init(){this.bindKeyBoardEvent(),this.bindMouseEvent()}omitEvent(t,e,s,i){e({target:t,x:s,y:i})}bindMouseEvent(){this.canvasEle.addEventListener("click",t=>{let e=t.clientX-this.canvasLeft,s=t.clientY-this.canvasTop;this.clickEventList.map(t=>{i.isInShape(this.ctx,t.shape,e,s)&&this.omitEvent(t.shape,t.fn,e,s)})}),this.canvasEle.addEventListener("mousemove",t=>{let e=t.clientX-this.canvasLeft,s=t.clientY-this.canvasTop;this.mouseoverEventList.map(t=>{i.isInShape(this.ctx,t.shape,e,s)&&(t.shape.isMouseIn()||(this.omitEvent(t.shape,t.fn,e,s),t.shape.isMouseIn(!0)))}),this.mouseoutEventList.map(t=>{i.isInShape(this.ctx,t.shape,e,s)||t.shape.isMouseIn()&&(this.omitEvent(t.shape,t.fn,e,s),t.shape.isMouseIn(!1))}),this.mousemoveEventList.map(t=>{i.isInShape(this.ctx,t.shape,e,s)&&(this.omitEvent(t.shape,t.fn,e,s),t.shape.isMouseIn(!0))})})}bindKeyBoardEvent(){document.addEventListener("keydown",t=>{this.keypressEventMap[t.keyCode]&&this.keypressEventMap[t.keyCode].map(t=>{this.omitEvent(t.shape,t.fn.fn)})})}addEvent(t){"keypress"===t.eventName?(void 0===this.keypressEventMap[t.fn.keyCode]&&(this.keypressEventMap[t.fn.keyCode]=[]),this.keypressEventMap[t.fn.keyCode].push(t)):this[t.eventName+"EventList"].push(t)}delEvent(t){let e=null;"keypress"===t.eventName?(e=this.keypressEventMap[t.keyCode]).map((s,i)=>{s.shape.attr("id")===t.shape.attr("id")&&e.splice(i,1)}):(e=this[t.eventName+"EventList"]).map((s,i)=>{s.shape.attr("id")===t.shape.attr("id")&&e.splice(i,1)})}}}]);